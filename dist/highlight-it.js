var J=!1;function H(s){J=s}function l(...s){if(J)console.log("[highlight-it LOG]: ",...s)}function C(...s){if(J)console.warn("[highlight-it WARN]: ",...s)}function q(...s){console.error("[highlight-it ERROR]: ",...s)}function F(s){let{tagName:m,src:p}=s,i,y,x=new Promise((O,Q)=>{[i,y]=[O,Q]}),b;if(m==="link")b=document.createElement("link"),b.rel="stylesheet",b.href=p;else b=document.createElement("script"),b.defer=!0,b.src=p;return b.onload=()=>{i()},b.onerror=()=>{y(Error(`Failed to load ${m}: ${p}`))},document.body.appendChild(b),x}function K(){let s=document.currentScript,m={theme:"prism",darkMode:"",verbose:!1};if(s&&s instanceof HTMLScriptElement&&s.src)try{let p=new URL(s.src);m.theme=p.searchParams.get("theme")||p.searchParams.get("config")||"prism",m.darkMode=p.searchParams.get("darkmode")||p.searchParams.get("darkMode");let i=p.searchParams.get("verbose");if(i)m.verbose=["true","1","yes","on"].includes(i.toLowerCase())}catch(p){return C("Failed to parse script URL:",p),m}return m}function w(s){return Boolean(s)}class k{static loadedResources=new Set;async loadResource(s){if(k.isResourceLoaded(s))return;if(s.dependencies&&s.dependencies.length>0)await Promise.all(s.dependencies.map((m)=>this.loadResource(m)));w(s.script)&&await F({tagName:"script",src:s.script}),w(s.link)&&await F({tagName:"link",src:s.link}),k.addResourceLoaded(s)}static isResourceLoaded(s){return w(s.script)&&k.loadedResources.has(s.script)||w(s.link)&&k.loadedResources.has(s.link)}static addResourceLoaded(s){w(s.script)&&k.loadedResources.has(s.script),w(s.link)&&k.loadedResources.has(s.link)}waitUntil(s,m=15000){return new Promise((p,i)=>{if(s()){p();return}try{let y=Date.now(),x=setInterval(()=>{if(s())clearInterval(x),p();else if(Date.now()-y>m)clearInterval(x),i(Error("Highlighting engine failed to load within expected time."))},50)}catch(y){i(y)}})}}var h={builtIn:{urlPrefix:"https://cdn.jsdelivr.net/gh/PrismJS/prism@1.30.0",themes:{coy:"/themes/prism-coy.min.css",dark:"/themes/prism-dark.min.css",funky:"/themes/prism-funky.min.css",okaidia:"/themes/prism-okaidia.min.css",solarizedlight:"/themes/prism-solarizedlight.min.css",tomorrow:"/themes/prism-tomorrow.min.css",twilight:"/themes/prism-twilight.min.css",prism:"/themes/prism.min.css"},plugins:[{script:"/plugins/autoloader/prism-autoloader.min.js"},{script:"/plugins/line-numbers/prism-line-numbers.min.js",link:"/plugins/line-numbers/prism-line-numbers.min.css"},{script:"/plugins/line-highlight/prism-line-highlight.min.js",link:"/plugins/line-highlight/prism-line-highlight.min.css"},{script:"/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js",dependencies:[{script:"/plugins/toolbar/prism-toolbar.min.js",link:"/plugins/toolbar/prism-toolbar.min.css"}]}]},external:{urlPrefix:"https://cdn.jsdelivr.net/gh/PrismJS/prism-themes@1.9.0/themes",themes:{"a11y-dark":"/prism-a11y-dark.css","atom-dark":"/prism-atom-dark.css","base16-ateliersulphurpool.light":"/prism-base16-ateliersulphurpool.light.css",cb:"/prism-cb.css","coldark-cold":"/prism-coldark-cold.css","coldark-dark":"/prism-coldark-dark.css","coy-without-shadows":"/prism-coy-without-shadows.css",darcula:"/prism-darcula.css",dracula:"/prism-dracula.css","duotone-dark":"/prism-duotone-dark.css","duotone-earth":"/prism-duotone-earth.css","duotone-forest":"/prism-duotone-forest.css","duotone-light":"/prism-duotone-light.css","duotone-sea":"/prism-duotone-sea.css","duotone-space":"/prism-duotone-space.css",ghcolors:"/prism-ghcolors.css","gruvbox-dark":"/prism-gruvbox-dark.css","gruvbox-light":"/prism-gruvbox-light.css","holi-theme":"/prism-holi-theme.css",hopscotch:"/prism-hopscotch.css",laserwave:"/prism-laserwave.css",lucario:"/prism-lucario.css","material-dark":"/prism-material-dark.css","material-light":"/prism-material-light.css","material-oceanic":"/prism-material-oceanic.css","night-owl":"/prism-night-owl.css",nord:"/prism-nord.css","one-dark":"/prism-one-dark.css","one-light":"/prism-one-light.css",pojoaque:"/prism-pojoaque.css","shades-of-purple":"/prism-shades-of-purple.css","solarized-dark-atom":"/prism-solarized-dark-atom.css",synthwave84:"/prism-synthwave84.css",vs:"/prism-vs.css","vsc-dark-plus":"/prism-vsc-dark-plus.css",xonokai:"/prism-xonokai.css","z-touch":"/prism-z-touch.css"}}};class z extends k{resources=[];constructor(s){super();let{theme:m,darkMode:p}=s;l("Loaded config:",h),this.setTheme(m,p||""),this.setPlugins()}async initialize(){if(!window.Prism)window.Prism={manual:!0};else window.Prism.manual=!0;let s=async(m)=>{await this.loadResource(m)};try{await s({script:`${h.builtIn.urlPrefix}/components/prism-core.min.js`}),l("Core script loaded."),await Promise.all(this.resources.map(s)),l("[Prism Engine] All resources loaded.",this.resources)}catch(m){q("Error during initialization:",m),l("Resources attempted to load:",this.resources)}}setTheme(s,m){let p=(x)=>{this.resources.push({link:`${h.builtIn.urlPrefix}${x}`})},i=(x)=>{this.resources.push({link:`${h.external.urlPrefix}${x}`})},y=Boolean(m)&&window.matchMedia?.("(prefers-color-scheme: dark)").matches;if(y&&h.builtIn.themes[m]){p(h.builtIn.themes[m]),l(`[Prism Engine] Dark mode theme "${m}" applied based on system preference.`);return}if(!y&&h.builtIn.themes[s]){p(h.builtIn.themes[s]),l(`[Prism Engine] Theme "${s}" applied based on system preference.`);return}if(!y&&h.external.themes[s]){i(h.external.themes[s]),l(`[Prism Engine] External theme "${s}" applied based on system preference.`);return}if(y&&h.external.themes[m]){i(h.external.themes[m]),l(`[Prism Engine] External dark mode theme "${m}" applied based on system preference.`);return}p(h.builtIn.themes.prism),C(`[Prism Engine] Theme "${s}" is not supported.`)}setPlugins(){h.builtIn.plugins.forEach((s)=>{this.resources.push({script:w(s.script)?`${h.builtIn.urlPrefix}${s.script}`:void 0,link:w(s.link)?`${h.builtIn.urlPrefix}${s.link}`:void 0,dependencies:s.dependencies?.map((m)=>({script:w(m.script)?`${h.builtIn.urlPrefix}${m.script}`:void 0,link:w(m.link)?`${h.builtIn.urlPrefix}${m.link}`:void 0}))})}),document.body.classList.add("line-numbers")}async highlight(){window.Prism?.highlightAll?.()}}(async()=>{if(typeof document>"u")return;if(window.__highlightItInitialized)return;window.__highlightItInitialized=!0;try{let{theme:s,darkMode:m,verbose:p}=K();H(p),l("highlight-it initialized with config:",{theme:s,darkMode:m,verbose:p});let i=new z({theme:s,darkMode:m});await i.initialize(),await i.highlight(),l("highlight-it: Code highlighting completed")}catch(s){q("highlight-it error:",s)}})();
